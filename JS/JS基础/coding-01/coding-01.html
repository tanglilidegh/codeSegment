<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>最常用的JS代码片段</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="themes/prism.css">
</head>
<body>
<h1>最常用的JS代码片段</h1>
<div class="wrapper">
    <div class="menu">
        <ul>
            <li><a href="#intercept" class="list">字符串超出长度后截取,显示...</a></li>
            <li><a href="#getHostName" class="list">获取域名主机</a></li>
            <li><a href="#goTop" class="list">返回顶部的通用方法</a></li>
            <li><a href="#getHostName" class="list">获取域名主机</a></li>
            <li><a href="#getCode" class="list">js获取验证码倒计时效果</a></li>
        </ul>
    </div>
    <div class="main">
        <h3 id="intercept"><i></i>字符串超出长度后截取,显示...</h3>
        <div class="coding-panel">
            <div class="result">
                <h4><i></i>截取前:</h4>
                <p class="before show">原生JavaScript实现字符串超出限制长度后截取并在结尾显示省略号</p>
                <h4><i></i>截取后:</h4>
                <div class="after show"></div>
            </div>
            <div class="coding">
                <pre>
                    <code class="language-JavaScript">
function cutstr(str, len) {
    var temp;
    var icount = 0;
    var patrn = /[^\x00-\xff]/;
    var strre = "";
    for (var i = 0; i < str.length; i++){
        if(icount < len - 1){
            temp = str.substr(i, 1);
            if(patrn.exec(temp) == null){
                icount = icount + 1;
            } else {
                icount = icount + 2;
            }
            strre += temp
        } else {
            break;
        }
    }
    return strre + "...";
}
        </code>
                </pre>
            </div>
        </div>
        <h3 id="getHostName"><i></i>获取域名主机</h3>
        <div class="coding-panel">
            <div class="result">
                <h4><i></i>当前主机名:</h4>
                <div class="host show"></div>
            </div>
            <div class="coding">
                <pre>
                    <code class="language-JavaScript">
function getHost(url) {
    var host = "null";
    if (typeof url == "undefined" || null == url) {
        url = window.location.href;
    }
    var regex = /^\w+\:\/\/([^\/]*).*/;
    var match = url.match(regex);
    if (typeof match != "undefined" && null != match) {
        host = match[1];
    }
    return host;
}
                    </code>
                </pre>
            </div>
        </div>
        <h3 id="goTop"><i></i>返回顶部的通用方法</h3>
        <div class="coding-panel">
            <div class="result">
                <h4><i></i>请看页面右下角:</h4>
                <div id="gotop-btn">goTop</div>
            </div>
            <div class="coding">
                <pre>
                    <code class="language-JavaScript">
function backTop(btnId) {
    var btn = document.getElementById(btnId);
    var d = document.documentElement;
    var b = document.body;
    window.onscroll = set;
    btn.style.display = "none";
    btn.onclick = function() {
        btn.style.display = "none";
        window.onscroll = null;
        this.timer = setInterval(function() {
            d.scrollTop -= Math.ceil((d.scrollTop + b.scrollTop) * 0.1);
            b.scrollTop -= Math.ceil((d.scrollTop + b.scrollTop) * 0.1);
            if ((d.scrollTop + b.scrollTop) == 0) clearInterval(btn.timer, window.onscroll = set);
            }, 10);
    };
    function set() {
        btn.style.display = (d.scrollTop + b.scrollTop > 100) ? 'block': "none"
    }
};
backTop('goTop');
                    </code>
                </pre>
            </div>
        </div>
        <h3 id="getCode"><i></i>js获取验证码倒计时效果</h3>
        <div class="coding-panel">
            <div class="result">
                <h4><i></i>请看页面右下角:</h4>
                <div class="input-line">
                    <label>验证码:</label>
                    <input class="codes" type="text" placeholder="请输入验证码">
                    <input class="codes-btn" type="button" value="获取验证码">
                </div>
            </div>
            <div class="coding">
                <pre>
                    <code class="language-JavaScript">
var wait = 60;
function time(o) {
    if (wait == 0) {
        o.removeAttribute("disabled");
        o.value = "获取验证码";
        wait = 60;
    } else {
        o.setAttribute("disabled", true);
        o.value = "重新发送(" + wait + ")";
        wait--;
        setTimeout(function () {
                time(o)
            },
            1000)
    }
}
document.querySelector(".codes-btn").onclick = function () {
    time(this);
};

                    </code>
                </pre>
            </div>
        </div>
    </div>
</div>
<script src="js/script.js"></script>
<script src="themes/prism.js"></script>
</body>
</html>